#include <stdio.h>
#include <string.h>
#include <time.h>

// Функция для вывода строки по центру с заполнением *
void print_centered(char* text, int width, char fill_char) {
    int len = strlen(text);
    int padding = (width - len) / 2;

    // Левое заполнение
    for (int i = 0; i < padding; i++) {
        putchar(fill_char);
    }

    // Текст
    printf("%s", text);

    // Правое заполнение
    for (int i = 0; i < width - len - padding; i++) {
        putchar(fill_char);
    }
    printf("\n");
}

// Функция для вывода границы окна
void print_border(int width, char border_char) {
    for (int i = 0; i < width; i++) {
        putchar(border_char);
    }
    printf("\n");
}

int main() {
    time_t t;
    struct tm* now;
    char buffer[100];
    int screen_width = 80;  // Ширина экрана в символах
    char fill_char = '*';   // Символ заполнения
    char border_char = '*'; // Символ границы

    // Получаем текущее время
    t = time(NULL);
    now = localtime(&t);

    // Верхняя граница окна
    printf("\n");
    print_border(screen_width, border_char);

    // Пустая строка с границами
    print_centered("", screen_width, ' ');

    // Заголовок окна
    sprintf(buffer, " TEKUSHEE VREMJA ");
    print_centered(buffer, screen_width, fill_char);

    // Разделитель
    print_centered("", screen_width, ' ');

    // Время
    sprintf(buffer, " Vremja: %02d:%02d:%02d ",
        now->tm_hour, now->tm_min, now->tm_sec);
    print_centered(buffer, screen_width, fill_char);

    // Дата
    sprintf(buffer, " Data: %02d.%02d.%d ",
        now->tm_mday, now->tm_mon + 1, now->tm_year + 1900);
    print_centered(buffer, screen_width, fill_char);

    // День недели
    char* days[] = { "Voskresenie", "Ponedelnik", "Vtornik",
                    "Sreda", "Chetverg", "Pjatnica", "Subbota" };
    sprintf(buffer, " Den nedeli: %s ", days[now->tm_wday]);
    print_centered(buffer, screen_width, fill_char);

    // Разделитель
    print_centered("", screen_width, ' ');

    // До Нового года
    int months_left = 11 - now->tm_mon;
    int current_day = now->tm_mday;
    int days_in_month[] = { 31, 28, 31, 30, 31, 30,
                          31, 31, 30, 31, 30, 31 };
    int days_left = 0;

    if (now->tm_mon == 11) { // Декабрь
        days_left = 31 - current_day;
    }
    else {
        days_left = days_in_month[now->tm_mon] - current_day;
    }

    sprintf(buffer, " Do Novogo goda: %d mes. i %d dn. ",
        months_left, days_left);
    print_centered(buffer, screen_width, fill_char);

    // Пустая строка с границами
    print_centered("", screen_width, ' ');

    // Нижняя граница окна
    print_border(screen_width, border_char);

    return 0;
}
